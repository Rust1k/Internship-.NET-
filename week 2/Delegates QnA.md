1. What keyword is used when defining a delegate? And what does a delegate definition look like?    
keyword <code>delegate</code>

<details><summary>Answer</summary>

```C#
public delegate int CalculatePlus(int num1, int num2)
```

</details>
<br> 

2. Suppose we have a delegate
```C#
Func<int, int> func = x => x + 5;
```
What are two ways we can call it? 

<details><summary>Answer</summary>

```C#
func(5);
func.Invoke(5);
```
In the asynchronous case, use BeginInvoke and EndInvoke. 

</details>
<br> 

3. Suppose the <code>Sort</code> method takes a delegate that it will use for comparison, and we want to pass our <code>MyComparer</code> comparer to it. What would the shorthand for passing a delegate look like? 
<details><summary>Answer</summary>

```C#
array.Sort(MyComparer);
```

</details>
<br> 

4. Is it possible to declare a delegate implicitly?For example:
```C#
var comparer = (x, y) => x >= y; 
```
<details><summary>Answer</summary>
<p>
No, such an entry will result in a compilation error. The compiler will not be able to figure out what type "x" and "y" are, so it needs to explicitly state which types they are.

Correct entry: 
```C#
Func<int, int, bool> comparer = (x,y) => x >= y;
```
</p>
</details>
<br> 

5. What fields does a delegate type object store, and where is it stored in memory? 
<details><summary>Answer</summary>
<p>
A delegate type object consists of a pair of fields: <code>target</code> and <code>method</code>, and it is stored on the heap. 
</p>
</details>
<br> 

6. What is the function of the target and method fields of an object of a delegate type? 
<details><summary>Answer</summary>
<p>
The <code>method</code> field refers to the method itself in memory, and the <code>target</code> refers to the object from which this method should be called, if it is dynamic. If the <code>method</code> is static, then <code>target</code> is null.
</p>
</details>
<br> 

7. What are three types of delegates built into .NET? How do they differ from each other? 
<details><summary>Answer</summary>
<p>
There are three types of built-in delegates in .NET: Func, Predicate and Action.

Func - has a return type.
For example, <code>Func&lt;int, int, string&gt;</code> takes two <code>ints</code> and returns a <code>string</code>.

Predicate - takes one argument and returns bool.

Action - has no return type.
For example, Action - has no return type and no accepted arguments.
<code>Action&lt;int&gt;</code> has no return type and takes an <code>int</code> type variable as an argument.
</p>
</details>
<br> 

8. Suppose we want to call the <code>Sort</code> method, which takes an array and a <code>Comparer</code> delegate, and pass our comparer, such as <code>MyComparer</code>, to it. What would a call record look like using an anonymous delegate?
<details><summary>Answer</summary>
<p>
```C#
Sort(someArray, delegate(int x, int y) { return x > y; })
```
</p>
</details>
<br> 

9. What does a lambda expression look like that takes a number "x" and prints it to the console? 

<details><summary>Answer</summary>
<p>
```C#
Action<int> print = (x) => Console.WriteLine(x).
```
In fact, there is one trick here, you can simply write:
```C#
Action<int> print = Console.WriteLine
```
without the "x" in the parentheses, and such a lambda expression will still print "x" to the console. This works because the compiler itself is able to guess that the argument it takes should be placed in the called function. However, this method does not work with multiple variables:
```C#
(x, y) => Console.WriteLine
```
will not work due to the ambiguity of the expression. 
</p>
</details>
<br> 

10. What is a closure? 
<details><summary>Answer</summary>
<p>
A closure is a situation when a lambda expression or delegate uses a variable from another method. 
</p>
</details>
<br> 

11. What is a closure trap? 
<details><summary>Answer</summary>
<p>
A closure trap is a situation where a lambda expression uses a common variable for all iterations in a loop. A common example of a closure trap is when using the <code>i</code> variable in a <code>for</code> loop in a lambda expression. Such a variable eventually becomes a class field, and accordingly becomes common for all iterations in the loop. 
</p>
</details>
<br> 

12. What does a delegate of this type take and return? 
```C#
Func<int> someFunction
```
<details><summary>Answer</summary>
<p>
<code>someFunction</code> has no accepted arguments and returns a variable of type <code>int</code>. 
</p>
</details>
<br> 

13. All methods have a name, but does an anonymous delegate have one? 
<details><summary>Answer</summary>
<p>
It has. It is automatically generated by the compiler at compile time, and the name can be easily seen while debugging the program. 
</p>
</details>
<br> 

14. Why in the record <code>delegate void TellUser(string message);</code> no function body? 
<details><summary>Answer</summary>
<p>
Because it's a data type, not a function itself 
</p>
</details>
<br> 

15. Is it always necessary to create a delegate with new? Why? 
<details><summary>Answer</summary>
<p>
No. If you want to pass a method as an argument to another method, then the delegate type is already written in the argument and the compiler will create a delegate of the required type and wrap the method passed as an argument into it.
</p>
</details>
<br> 

16. In what cases it is possible not to use return statement in lambda expression?
<details><summary>Answer</summary>
<p>
If it's a lambda from a single expression. Curly braces are not used in this case.  
If no value is returned in this lambda. 
</p>
</details>
<br> 

17. What is the type of the expression <code>() => true</code>
<details><summary>Answer</summary>

We don't know, because different delegates may be suitable. Including <code>Func&lt;bool&gt;</code>

</details>
<br> 

18. Rewrite the following codewithout using delegates, using regular classes, methods, and fields. 

```C#
public static Func<int, int> Make()
{
    int n = 1;
    return a =>
    {
        n += a;
        return n;
    };
}
```

<details><summary>Answer</summary>

```C#
public class Make {
  private int n = 1;
  public int Func(int a) {
      n += a;
          return n;
  }
}
```
</details>
<br> 

19. What types can be specified instead of <code>Type1, Type2, Type3</code>? There are several solutions, write any. You cannot use <code>object</code>. 

```C#
public static Type1 Get1()
{
    var x = 1f;
    return y => x + y;
}

public static Type2 Get2()
{
    return x => Console.WriteLine(x);
}

public static Type3 Get3()
{
    return () =>
    {
        var y = 42;
        return x => x + y;
    };
}
```

<details><summary>Answer</summary>

```C#
Func<float, float> 
Action<string>
Func<Func<int, int>>
```

</details>